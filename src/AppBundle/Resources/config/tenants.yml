services:
  app.tenant.loader.access:
    class: AppBundle\Tenant\Loader\AccessLoader
    arguments:
      - '@ds_security.service.access'
      - '@ds_security.service.permission'
    tags:
      - { name: ds_tenant.loader }

  app.tenant.loader.config:
    class: AppBundle\Tenant\Loader\ConfigLoader
    arguments:
      - '@ds_config.service.config'
    tags:
      - { name: ds_tenant.loader }

  app.tenant.loader.business_unit:
    class: AppBundle\Tenant\Loader\BusinessUnitLoader
    arguments:
      - '@app.service.business_unit'
    tags:
      - { name: ds_tenant.loader }

  app.tenant.loader.identity.staff_persona:
    class: AppBundle\Tenant\Loader\Identity\StaffPersonaLoader
    arguments:
      - '@app.service.staff_persona'
    tags:
      - { name: ds_tenant.loader }

  app.tenant.loader.identity.staff:
    class: AppBundle\Tenant\Loader\Identity\StaffLoader
    arguments:
      - '@app.service.staff'
    tags:
      - { name: ds_tenant.loader }

  app.tenant.loader.identity.system:
    class: AppBundle\Tenant\Loader\Identity\SystemLoader
    arguments:
      - '@app.service.system'
    tags:
      - { name: ds_tenant.loader }

  app.tenant.unloader.anonymous_persona:
    class: AppBundle\Tenant\Unloader\AnonymousPersonaUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader, priority: -1 }

  app.tenant.unloader.anonymous:
    class: AppBundle\Tenant\Unloader\AnonymousUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader }

  app.tenant.unloader.business_unit:
    class: AppBundle\Tenant\Unloader\BusinessUnitUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader }

  app.tenant.unloader.individual_persona:
    class: AppBundle\Tenant\Unloader\IndividualUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader, priority: -1 }

  app.tenant.unloader.individual:
    class: AppBundle\Tenant\Unloader\IndividualUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader }

  app.tenant.unloader.organization_persona:
    class: AppBundle\Tenant\Unloader\OrganizationPersonaUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader, priority: -1 }

  app.tenant.unloader.organization:
    class: AppBundle\Tenant\Unloader\OrganizationUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader }

  app.tenant.unloader.role:
    class: AppBundle\Tenant\Unloader\RoleUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader }

  app.tenant.unloader.staff_persona:
    class: AppBundle\Tenant\Unloader\StaffPersonaUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader, priority: -1 }

  app.tenant.unloader.staff:
    class: AppBundle\Tenant\Unloader\StaffUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader }

  app.tenant.unloader.system:
    class: AppBundle\Tenant\Unloader\SystemUnloader
    arguments:
      - '@doctrine.orm.entity_manager'
    tags:
      - { name: ds_tenant.unloader }
